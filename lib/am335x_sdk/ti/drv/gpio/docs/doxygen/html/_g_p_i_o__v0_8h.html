<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>GPIO_v0.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<table width=100%>
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border=0 src="../../tilogo.gif"></a></td>
  <td bgcolor="red"><img src="../../titagline.gif"></td>
</tr>
</table>
<!-- Generated by Doxygen 1.8.9.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_2bde32672457d7abbf442c85fc3ee929.html">v0</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">GPIO_v0.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>GPIO driver.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;<a class="el" href="_g_p_i_o_8h.html">ti/drv/gpio/GPIO.h</a>&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_g_p_i_o___int_cfg__s.html">GPIO_IntCfg_s</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">GPIO pin interrupt config attributes.  <a href="struct_g_p_i_o___int_cfg__s.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_g_p_i_o__v0___hw_attrs__s.html">GPIO_v0_HwAttrs_s</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">GPIO Keystone Hardware attributes.  <a href="struct_g_p_i_o__v0___hw_attrs__s.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_g_p_i_o__v0___config__s.html">GPIO_v0_Config_s</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">GPIO device specific driver configuration structure.  <a href="struct_g_p_i_o__v0___config__s.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a4a038784019dfde08d4e2d901871a897"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_g_p_i_o__v0_8h.html#a4a038784019dfde08d4e2d901871a897">GPIO_v0_EMPTY_PIN</a>&#160;&#160;&#160;(0x0000U)</td></tr>
<tr class="memdesc:a4a038784019dfde08d4e2d901871a897"><td class="mdescLeft">&#160;</td><td class="mdescRight">Device specific port/pin definition macros.  <a href="#a4a038784019dfde08d4e2d901871a897">More...</a><br /></td></tr>
<tr class="separator:a4a038784019dfde08d4e2d901871a897"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:afe5df00045dff82a1f05fdc664d194f4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afe5df00045dff82a1f05fdc664d194f4"></a>
typedef int32_t(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_g_p_i_o__v0_8h.html#afe5df00045dff82a1f05fdc664d194f4">GPIO_socCfgIntrPathFxn</a>) (uint32_t portNum, uint32_t pinNum, void *hwAttrs, bool setIntrPath)</td></tr>
<tr class="memdesc:afe5df00045dff82a1f05fdc664d194f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">The function to set interrupt path. <br /></td></tr>
<tr class="separator:afe5df00045dff82a1f05fdc664d194f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9b0dd1e779c68e0f7c0e49d36aaa6c5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac9b0dd1e779c68e0f7c0e49d36aaa6c5"></a>
typedef struct <a class="el" href="struct_g_p_i_o___int_cfg__s.html">GPIO_IntCfg_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_g_p_i_o__v0_8h.html#ac9b0dd1e779c68e0f7c0e49d36aaa6c5">GPIO_IntCfg</a></td></tr>
<tr class="memdesc:ac9b0dd1e779c68e0f7c0e49d36aaa6c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">GPIO pin interrupt config attributes. <br /></td></tr>
<tr class="separator:ac9b0dd1e779c68e0f7c0e49d36aaa6c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f3d9509ebdbda38f0676ee42967d21b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1f3d9509ebdbda38f0676ee42967d21b"></a>
typedef struct <a class="el" href="struct_g_p_i_o__v0___hw_attrs__s.html">GPIO_v0_HwAttrs_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_g_p_i_o__v0_8h.html#a1f3d9509ebdbda38f0676ee42967d21b">GPIO_v0_HwAttrs</a></td></tr>
<tr class="memdesc:a1f3d9509ebdbda38f0676ee42967d21b"><td class="mdescLeft">&#160;</td><td class="mdescRight">GPIO Keystone Hardware attributes. <br /></td></tr>
<tr class="separator:a1f3d9509ebdbda38f0676ee42967d21b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a891823ea6d1c140599aab00672730b5e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a891823ea6d1c140599aab00672730b5e"></a>
typedef struct <a class="el" href="struct_g_p_i_o__v0___config__s.html">GPIO_v0_Config_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_g_p_i_o__v0_8h.html#a891823ea6d1c140599aab00672730b5e">GPIO_v0_Config</a></td></tr>
<tr class="memdesc:a891823ea6d1c140599aab00672730b5e"><td class="mdescLeft">&#160;</td><td class="mdescRight">GPIO device specific driver configuration structure. <br /></td></tr>
<tr class="separator:a891823ea6d1c140599aab00672730b5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0c6a16f13012877c36ffc55d720c9b2f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_g_p_i_o__v0_8h.html#a0c6a16f13012877c36ffc55d720c9b2f">GPIO_socGetNumPinsPorts</a> (uint32_t *numPins, uint32_t *numPorts)</td></tr>
<tr class="memdesc:a0c6a16f13012877c36ffc55d720c9b2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">This API gets the number of GPIO pins per port and GPIO number of ports.  <a href="#a0c6a16f13012877c36ffc55d720c9b2f">More...</a><br /></td></tr>
<tr class="separator:a0c6a16f13012877c36ffc55d720c9b2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7793dd861c2fe936e7fd39760fdb2a78"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_g_p_i_o__v0_8h.html#a7793dd861c2fe936e7fd39760fdb2a78">GPIO_socConfigIntrPath</a> (uint32_t portNum, uint32_t pinNum, void *hwAttrs, bool setIntrPath)</td></tr>
<tr class="memdesc:a7793dd861c2fe936e7fd39760fdb2a78"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function sets/clears the soc interrupt path including the <br />
 interrupt routers (GPIO_RTR,MAIN2MCU_RTR) etc and GPIO number of ports.  <a href="#a7793dd861c2fe936e7fd39760fdb2a78">More...</a><br /></td></tr>
<tr class="separator:a7793dd861c2fe936e7fd39760fdb2a78"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>GPIO driver. </p>
<p>============================================================================</p>
<p>The GPIO header file should be included in an application as follows: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_g_p_i_o__v0_8h.html">ti/drv/gpio/src/v0/GPIO_v0.h</a>&gt;</span></div>
</div><!-- fragment --><h1>Operation</h1>
<p>The GPIO module allows you to manage General Purpose I/O pins via simple and portable APIs. The application is required to supply a GPIO_v0_Config structure to the module (see example below). This structure communicates to the GPIO module how to configure the pins used by the application (See the description of GPIO_PinConfig in the <a class="el" href="_g_p_i_o_8h.html" title="GPIO driver. ">GPIO.h</a> file).</p>
<p>The application is required to call <a class="el" href="group___d_r_v___g_p_i_o___a_p_i___m_o_d_u_l_e.html#ga75690af9e89afd801dc40b20b5c813f1" title="Initializes the GPIO module. ">GPIO_init()</a>. This function will initialize all the GPIO pins defined in the GPIO_PinConfig table to the configurations specified. Once completed the other APIs can be used to access the pins.</p>
<p>Asserts are used to verify that the driver has been initialized, and is reading/writing a valid index.</p>
<p>The following is an example of the code required to use 2 LEDs on an AM57X IDK board.</p>
<p>Board header file: </p><div class="fragment"><div class="line"><span class="comment">// Enum of GPIO names on the AM57X IDK EVM dev board</span></div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span> AM57X_IDK_EVM_GPIOName {</div>
<div class="line">    AM57X_IDK_EVM_GRN_LED = 0,</div>
<div class="line">    AM57X_IDK_EVM_YEL_LED,</div>
<div class="line">} AM57X_IDK_EVM_GPIOName;</div>
</div><!-- fragment --><p>Board initialization code: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;ti/drv/GPIO.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;ti/drv/gpio/soc/GPIO_v0.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="comment">// Array of pin configurations</span></div>
<div class="line"><span class="comment">// NOTE: The order of the pin configurations must coincide with what was</span></div>
<div class="line"><span class="comment">//       defined in header file.</span></div>
<div class="line"><span class="comment">// NOTE: Pins not used for interrupts should be placed at the end of the</span></div>
<div class="line">         array.  Callback entries can be omitted from callbacks array to</div>
<div class="line">         reduce memory usage.</div>
<div class="line">const <a class="code" href="group___d_r_v___g_p_i_o___a_p_i___m_o_d_u_l_e.html#ga7f5d979226db633309b3fdc0f4a8aef6">GPIO_PinConfig</a> gpioPinConfigs[] = {</div>
<div class="line">    <span class="comment">// Input pins</span></div>
<div class="line">    <span class="comment">// AM57X_IDK_LED_GRN</span></div>
<div class="line">    AM57X_IDK_GPIO_GRN_PIN | GPIO_CFG_IN_INT_RISING | GPIO_CFG_INPUT,</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Output pins</span></div>
<div class="line">    <span class="comment">// AM57X_IDK_LED_YEL</span></div>
<div class="line">    AM57X_IDK_GPIO_YEL_PIN | GPIO_CFG_OUTPUT,</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="comment">// Array of callback function pointers</span></div>
<div class="line"><span class="comment">// NOTE: The order of the pin configurations must coincide with what was</span></div>
<div class="line"><span class="comment">//       defined in header file.</span></div>
<div class="line"><span class="comment">// NOTE: Pins not used for interrupts can be omitted from callbacks array to</span></div>
<div class="line">         reduce memory usage (<span class="keywordflow">if</span> placed at end of gpioPinConfigs array).</div>
<div class="line">const GPIO_callbackFxn gpioCallbackFunctions[] = {</div>
<div class="line">    NULL,       <span class="comment">// AM57X_IDK_LED_GRN</span></div>
<div class="line">    NULL</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="comment">// The device-specific GPIO_config structure</span></div>
<div class="line"><span class="keyword">const</span> <a class="code" href="struct_g_p_i_o__v0___config__s.html">GPIO_v0_Config</a> GPIO_v0_config = {</div>
<div class="line">    .<a class="code" href="struct_g_p_i_o__v0___config__s.html#a9f6b6bf0849f8096bdca0986f3c68490">pinConfigs</a> = (<a class="code" href="group___d_r_v___g_p_i_o___a_p_i___m_o_d_u_l_e.html#ga7f5d979226db633309b3fdc0f4a8aef6">GPIO_PinConfig</a> *) gpioPinConfigs,</div>
<div class="line">    .callbacks = (<a class="code" href="group___d_r_v___g_p_i_o___a_p_i___m_o_d_u_l_e.html#ga033bc79f1a530381da2b74711e6b8971">GPIO_CallbackFxn</a> *) gpioCallbackFunctions,</div>
<div class="line">    .numberOfPinConfigs = <span class="keyword">sizeof</span>(gpioPinConfigs) / <span class="keyword">sizeof</span>(<a class="code" href="group___d_r_v___g_p_i_o___a_p_i___m_o_d_u_l_e.html#ga7f5d979226db633309b3fdc0f4a8aef6">GPIO_PinConfig</a>),</div>
<div class="line">    .numberOfCallbacks = <span class="keyword">sizeof</span>(gpioCallbackFunctions) / <span class="keyword">sizeof</span>(<a class="code" href="group___d_r_v___g_p_i_o___a_p_i___m_o_d_u_l_e.html#ga033bc79f1a530381da2b74711e6b8971">GPIO_CallbackFxn</a>),</div>
<div class="line">    .intPriority = (~0)</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="comment">// Initialize peripheral and pins using the following init API.</span></div>
<div class="line"></div>
<div class="line">    <a class="code" href="group___d_r_v___g_p_i_o___a_p_i___m_o_d_u_l_e.html#ga75690af9e89afd801dc40b20b5c813f1">GPIO_init</a>();</div>
</div><!-- fragment --><p>Keep in mind that the callback functions will be called in the context of an interrupt service routine and should be designed accordingly. When an interrupt is triggered, the interrupt status of all (interrupt enabled) pins on a port will be read, cleared, and the respective callbacks will be executed. Callbacks will be called in order from least significant bit to most significant bit. </p><hr/>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a4a038784019dfde08d4e2d901871a897"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GPIO_v0_EMPTY_PIN&#160;&#160;&#160;(0x0000U)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Device specific port/pin definition macros. </p>
<p>Below are the port/pin definitions to be used within the board's pin configuration table. These macros should be OR'd in with the respective pin configuration settings. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a7793dd861c2fe936e7fd39760fdb2a78"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t GPIO_socConfigIntrPath </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>portNum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>pinNum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>hwAttrs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>setIntrPath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function sets/clears the soc interrupt path including the <br />
 interrupt routers (GPIO_RTR,MAIN2MCU_RTR) etc and GPIO number of ports. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">portNum</td><td>The GPIO port number to configure the interrupt path. </td></tr>
    <tr><td class="paramname">pinNum</td><td>The GPIO pin number to configure the interrupt path. </td></tr>
    <tr><td class="paramname">hwAttrs</td><td>The GPIO_v0_HwAttrs for this SOC </td></tr>
    <tr><td class="paramname">setIntrPath</td><td>TRUE - set the interrupt path, FALSE - clear the interrupt path </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>CSL_PASS if successful, CSL_FAIL if failed </dd></dl>

</div>
</div>
<a class="anchor" id="a0c6a16f13012877c36ffc55d720c9b2f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GPIO_socGetNumPinsPorts </td>
          <td>(</td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>numPins</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>numPorts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This API gets the number of GPIO pins per port and GPIO number of ports. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">numPins</td><td>pointer to numPins variable. </td></tr>
    <tr><td class="paramname">numPorts</td><td>pointer to numPorts variable.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>none </dd></dl>

</div>
</div>
</div><!-- contents -->
<hr size="1"><small>
Copyright  2020, Texas Instruments Incorporated</small>
</body>
</html>
