<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>USBLIB_PACKED Struct Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<table width=100%>
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border=0 src="../../tilogo.gif"></a></td>
  <td bgcolor="red"><img src="../../titagline.gif"></td>
</tr>
</table>
<!-- Generated by Doxygen 1.8.9.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<div class="title">USBLIB_PACKED Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This structure is used to access the Command Block wrapper (CBW) data structure that is used when the communicating with the mass storage class device.  
 <a href="struct_u_s_b_l_i_b___p_a_c_k_e_d.html#details">More...</a></p>

<p><code>#include &lt;usbmsc.h&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a83acb775ce87767e4f4ffdc05851ea00"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_u_s_b_l_i_b___p_a_c_k_e_d.html#a83acb775ce87767e4f4ffdc05851ea00">dCBWSignature</a></td></tr>
<tr class="separator:a83acb775ce87767e4f4ffdc05851ea00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abde3ebb83b44336a36d8bb1b257b8674"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_u_s_b_l_i_b___p_a_c_k_e_d.html#abde3ebb83b44336a36d8bb1b257b8674">dCBWTag</a></td></tr>
<tr class="separator:abde3ebb83b44336a36d8bb1b257b8674"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5eb1a62901c25e1e97ddfa7c532b2b72"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_u_s_b_l_i_b___p_a_c_k_e_d.html#a5eb1a62901c25e1e97ddfa7c532b2b72">dCBWDataTransferLength</a></td></tr>
<tr class="separator:a5eb1a62901c25e1e97ddfa7c532b2b72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07579386bd50108a761c16a90cdfd723"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_u_s_b_l_i_b___p_a_c_k_e_d.html#a07579386bd50108a761c16a90cdfd723">bmCBWFlags</a></td></tr>
<tr class="separator:a07579386bd50108a761c16a90cdfd723"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17dcd9a2de0cea4466e62abb21e99fc7"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_u_s_b_l_i_b___p_a_c_k_e_d.html#a17dcd9a2de0cea4466e62abb21e99fc7">bCBWLUN</a></td></tr>
<tr class="separator:a17dcd9a2de0cea4466e62abb21e99fc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d528398d2e3593bdffd983310aacecc"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_u_s_b_l_i_b___p_a_c_k_e_d.html#a3d528398d2e3593bdffd983310aacecc">CBWCB</a> [16]</td></tr>
<tr class="separator:a3d528398d2e3593bdffd983310aacecc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24c1530cd3be04a0e374f998b9d859d0"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_u_s_b_l_i_b___p_a_c_k_e_d.html#a24c1530cd3be04a0e374f998b9d859d0">dCSWSignature</a></td></tr>
<tr class="separator:a24c1530cd3be04a0e374f998b9d859d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2cefacc868aacb56d8252607b44ab3e"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_u_s_b_l_i_b___p_a_c_k_e_d.html#ab2cefacc868aacb56d8252607b44ab3e">dCSWTag</a></td></tr>
<tr class="separator:ab2cefacc868aacb56d8252607b44ab3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c4547babe4b8394b37d45caae2f335c"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_u_s_b_l_i_b___p_a_c_k_e_d.html#a3c4547babe4b8394b37d45caae2f335c">dCSWDataResidue</a></td></tr>
<tr class="separator:a3c4547babe4b8394b37d45caae2f335c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae00ba338c314dc0993c5c9140ad1001c"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_u_s_b_l_i_b___p_a_c_k_e_d.html#ae00ba338c314dc0993c5c9140ad1001c">bCSWStatus</a></td></tr>
<tr class="separator:ae00ba338c314dc0993c5c9140ad1001c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This structure is used to access the Command Block wrapper (CBW) data structure that is used when the communicating with the mass storage class device. </p>
<p>This structure encapsulates the Command Status Word (CSW) structure that is sent in response to all CBW commands. </p>
</div><h2 class="groupheader">Field Documentation</h2>
<a class="anchor" id="a17dcd9a2de0cea4466e62abb21e99fc7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t USBLIB_PACKED::bCBWLUN</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The device Logical Unit Number (LUN) to which the command block is being sent. For devices that support multiple LUNs, the host shall place into this field the LUN to which this command block is addressed. Otherwise, the host shall set this field to zero.</p>
<p>The valid length of the CBWCB in bytes. This defines the valid length of the command block. The only legal values are 1 through 16. All other values are reserved. </p>

</div>
</div>
<a class="anchor" id="ae00ba338c314dc0993c5c9140ad1001c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t USBLIB_PACKED::bCSWStatus</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The bCSWStatus field indicates the success or failure of the command. The device shall set this byte to zero if the command completed successfully. A non-zero value shall indicate a failure during command execution. </p>

</div>
</div>
<a class="anchor" id="a07579386bd50108a761c16a90cdfd723"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t USBLIB_PACKED::bmCBWFlags</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The device will ignore these bits if the dCBWDataTransferLength value is set to 0.</p>
<p>The bits of this field are defined as follows: Bit 7 Direction 0 = Data-Out from host to the device, 1 = Data-In from the device to the host. Bit 6 Obsolete - The host shall set this bit to zero. Bits 5..0 Reserved - the host shall set these bits to zero. </p>

</div>
</div>
<a class="anchor" id="a3d528398d2e3593bdffd983310aacecc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t USBLIB_PACKED::CBWCB[16]</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This array holds the command block to be executed by the device. The MSC device will interpret the first bCBWCBLength bytes in this field as a command block as defined by the command set identified by bInterfaceSubClass. If the command set supported by the device uses command blocks of fewer than 16 bytes in length, the significant bytes shall be transferred first, beginning with the byte at offset 15. The device will ignore the content of the CBWCB field past the byte at offset (15 + bCBWCBLength - 1). </p>

</div>
</div>
<a class="anchor" id="a5eb1a62901c25e1e97ddfa7c532b2b72"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t USBLIB_PACKED::dCBWDataTransferLength</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of bytes of data that the host expects to transfer on the Bulk-In or Bulk-Out endpoint (as indicated by the Direction bit) during the execution of this command. If this field is zero, the device and the host will not transfer data between the CBW and the associated CSW, and the device will ignore the value of the Direction bit in bmCBWFlags. </p>

</div>
</div>
<a class="anchor" id="a83acb775ce87767e4f4ffdc05851ea00"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t USBLIB_PACKED::dCBWSignature</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Signature that helps identify this data packet as a CBW. The signature field shall contain the value 0x43425355 (little endian), indicating a CBW. </p>

</div>
</div>
<a class="anchor" id="abde3ebb83b44336a36d8bb1b257b8674"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t USBLIB_PACKED::dCBWTag</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The Command Block Tag sent by the host controller. The device shall echo the contents of this field back to the host in the dCSWTag field of the associated CSW. The dCSWTag positively associates a CSW with the corresponding CBW. </p>

</div>
</div>
<a class="anchor" id="a3c4547babe4b8394b37d45caae2f335c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t USBLIB_PACKED::dCSWDataResidue</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>For OUT transactions the device will fill the dCSWDataResidue field with the difference between the amount of data expected as stated in the dCBWDataTransferLength, and the actual amount of data processed by the device. For IN transactions the device will fill the dCSWDataResidue field with the difference between the amount of data expected as stated in the dCBWDataTransferLength and the actual amount of relevant data sent by the device. The dCSWDataResidue will not exceed the value sent in the dCBWDataTransferLength. </p>

</div>
</div>
<a class="anchor" id="a24c1530cd3be04a0e374f998b9d859d0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t USBLIB_PACKED::dCSWSignature</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Signature that identifies this data packet as a CSW. The signature field must contain the value 53425355h (little endian) to indicate CSW. </p>

</div>
</div>
<a class="anchor" id="ab2cefacc868aacb56d8252607b44ab3e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t USBLIB_PACKED::dCSWTag</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The device will set this field to the value received in the dCBWTag of the associated CBW. </p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following files:<ul>
<li>usbcdc.h</li>
<li>usblib.h</li>
<li><a class="el" href="usbmsc_8h.html">usbmsc.h</a></li>
</ul>
</div><!-- contents -->
<hr size="1"><small>
Copyright  2020, Texas Instruments Incorporated</small>
</body>
</html>
