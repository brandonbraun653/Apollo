<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>usb_dev_dman.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<table width=100%>
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border=0 src="../../tilogo.gif"></a></td>
  <td bgcolor="red"><img src="../../titagline.gif"></td>
</tr>
</table>
<!-- Generated by Doxygen 1.8.9.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_0e044d0be19a412cf1acdd01868b20e2.html">usb_func</a></li><li class="navelem"><a class="el" href="dir_b70cf4a6c6915e71574aae3e71a9539e.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">usb_dev_dman.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="usb__dev__object_8h.html">usb_dev_object.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a0f31ddaa3c785ca091a09fab6cbbcf52"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="usb__dev__dman_8h.html#a0f31ddaa3c785ca091a09fab6cbbcf52">MAX_NUM_DEVICE_CONTROLLERS</a>&#160;&#160;&#160;(2U)</td></tr>
<tr class="memdesc:a0f31ddaa3c785ca091a09fab6cbbcf52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum number of devices/gadgets that can be supported equals the number of controllers in the SOC.  <a href="#a0f31ddaa3c785ca091a09fab6cbbcf52">More...</a><br /></td></tr>
<tr class="separator:a0f31ddaa3c785ca091a09fab6cbbcf52"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a557a8934de7331054e59c77cba37e49d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a557a8934de7331054e59c77cba37e49d"></a>
typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="usb__dev__dman_8h.html#a557a8934de7331054e59c77cba37e49d">pFnStdRequest</a>) (struct <a class="el" href="structusb_gadget_obj.html">usbGadgetObj</a> *pGadgetObject, <a class="el" href="structusb_setup_pkt.html">usbSetupPkt_t</a> *pSetup)</td></tr>
<tr class="memdesc:a557a8934de7331054e59c77cba37e49d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function prototype for any standard USB request. <br /></td></tr>
<tr class="separator:a557a8934de7331054e59c77cba37e49d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a04fa5abdb54fee559af5d9093e1dbd6e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a04fa5abdb54fee559af5d9093e1dbd6e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="usb__dev__dman_8h.html#a04fa5abdb54fee559af5d9093e1dbd6e">USBDInitCoreObject</a> (void)</td></tr>
<tr class="memdesc:a04fa5abdb54fee559af5d9093e1dbd6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">This API initialise the gadget list with the core objects available. <br /></td></tr>
<tr class="separator:a04fa5abdb54fee559af5d9093e1dbd6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a6210665b1200f7df11cb65e80f8983"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="usb__dev__dman_8h.html#a2a6210665b1200f7df11cb65e80f8983">USBDeviceInit</a> (<a class="el" href="usb__dev__object_8h.html#a0cb1b96e7cf3c2ed46f017e98d7e321c">usbGadgetObj_t</a> *pUsbGadgetObj, const char *pName)</td></tr>
<tr class="memdesc:a2a6210665b1200f7df11cb65e80f8983"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function initialises the USB gadget device object and then calls the init routine of the device controller which it represents.  <a href="#a2a6210665b1200f7df11cb65e80f8983">More...</a><br /></td></tr>
<tr class="separator:a2a6210665b1200f7df11cb65e80f8983"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a112daae2878d100d0387b3ae350f6cd9"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="usb__dev__dman_8h.html#a112daae2878d100d0387b3ae350f6cd9">USBDevEndpt0Handler</a> (struct <a class="el" href="structusb_gadget_obj.html">usbGadgetObj</a> *pUsbGadgetObj, <a class="el" href="usb__dev__object_8h.html#a4b2b7e34246e399ad2d0ec224d4c8a46">usbEndpt0event_t</a> endptEvent, <a class="el" href="structusb_setup_pkt.html">usbSetupPkt_t</a> *pSetup)</td></tr>
<tr class="memdesc:a112daae2878d100d0387b3ae350f6cd9"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function handles the request EP0 requests which come from the lower layer driver. The protocol layer will interpret the setup packet and call the required function accordingly.  <a href="#a112daae2878d100d0387b3ae350f6cd9">More...</a><br /></td></tr>
<tr class="separator:a112daae2878d100d0387b3ae350f6cd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06c34ebcc71410d3ce1bb12977c4209e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="usb__dev__dman_8h.html#a06c34ebcc71410d3ce1bb12977c4209e">usbEp0reqComplete</a> (struct <a class="el" href="structusb_gadget_obj.html">usbGadgetObj</a> *pUsbGadgetObj, struct <a class="el" href="structusb_dev_request.html">usbDevRequest</a> *pReq)</td></tr>
<tr class="memdesc:a06c34ebcc71410d3ce1bb12977c4209e"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function handles the USB EP0 request complete.  <a href="#a06c34ebcc71410d3ce1bb12977c4209e">More...</a><br /></td></tr>
<tr class="separator:a06c34ebcc71410d3ce1bb12977c4209e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5549d37e9f015975a337fb59d4472774"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="usb__dev__dman_8h.html#a5549d37e9f015975a337fb59d4472774">usbSetupEpReq</a> (void *pUsbGadgetObj, uint32_t epNum, uint32_t *pUsbData, usbTokenType_t tokenType, uint32_t length, usbTransferType_t transferType)</td></tr>
<tr class="separator:a5549d37e9f015975a337fb59d4472774"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Gadget Device manager This file contains data structures and prototypes encapsulating the device manager functionlity of a USB gadget. Device manager is responsible for enumerating a device and ep0 handling . </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a0f31ddaa3c785ca091a09fab6cbbcf52"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_NUM_DEVICE_CONTROLLERS&#160;&#160;&#160;(2U)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum number of devices/gadgets that can be supported equals the number of controllers in the SOC. </p>
<p>Copyright (c) Texas Instruments Incorporated 2015-2016</p>
<p>Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</p>
<p>Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</p>
<p>Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</p>
<p>Neither the name of Texas Instruments Incorporated nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</p>
<p>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a112daae2878d100d0387b3ae350f6cd9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t USBDevEndpt0Handler </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structusb_gadget_obj.html">usbGadgetObj</a> *&#160;</td>
          <td class="paramname"><em>pUsbGadgetObj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="usb__dev__object_8h.html#a4b2b7e34246e399ad2d0ec224d4c8a46">usbEndpt0event_t</a>&#160;</td>
          <td class="paramname"><em>endptEvent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structusb_setup_pkt.html">usbSetupPkt_t</a> *&#160;</td>
          <td class="paramname"><em>pSetup</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function handles the request EP0 requests which come from the lower layer driver. The protocol layer will interpret the setup packet and call the required function accordingly. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pUsbGadgetObj</td><td>pointer to the USB gadget object. </td></tr>
    <tr><td class="paramname">endptEvent</td><td>Endpoint event which has occured. </td></tr>
    <tr><td class="paramname">pSetup</td><td>pointer to the setup packet received by the USB </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a2a6210665b1200f7df11cb65e80f8983"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t USBDeviceInit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="usb__dev__object_8h.html#a0cb1b96e7cf3c2ed46f017e98d7e321c">usbGadgetObj_t</a> *&#160;</td>
          <td class="paramname"><em>pUsbGadgetObj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function initialises the USB gadget device object and then calls the init routine of the device controller which it represents. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pUsbGadgetObj</td><td>pointer to usb gadget object usbGadgetObj_t </td></tr>
    <tr><td class="paramname">pName</td><td>pointer to string containing controller instance name. this instance would be assigned with the string passed to it.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">error</td><td>status- Status of the API call. Can be any of the following, S_PASS - indicates the operation is success E_FAIL - indicates the module is not enabled (timeout) E_INVALID_PARAM - gadget object pointer not valid </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a06c34ebcc71410d3ce1bb12977c4209e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void usbEp0reqComplete </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structusb_gadget_obj.html">usbGadgetObj</a> *&#160;</td>
          <td class="paramname"><em>pUsbGadgetObj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structusb_dev_request.html">usbDevRequest</a> *&#160;</td>
          <td class="paramname"><em>pReq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function handles the USB EP0 request complete. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pUsbGadgetObj</td><td>pointer to the USB gadget object. </td></tr>
    <tr><td class="paramname">pReq</td><td>pointer to the USB request which has been completed </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a5549d37e9f015975a337fb59d4472774"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void usbSetupEpReq </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pUsbGadgetObj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>epNum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>pUsbData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">usbTokenType_t&#160;</td>
          <td class="paramname"><em>tokenType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">usbTransferType_t&#160;</td>
          <td class="paramname"><em>transferType</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Setup Endpoint request. This request is requested by the class driver Same function is used for endpoint 0 and other endpoints request.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pUsbGadgetObj</td><td>pointer to the USB gadget object. </td></tr>
    <tr><td class="paramname">epNum</td><td>Endpoint number on which the request has to be made. </td></tr>
    <tr><td class="paramname">pUsbData</td><td>Pointer to the data in which data has been received or the data contained by this pointer is to be sent. </td></tr>
    <tr><td class="paramname">tokenType</td><td>The type of token or the direction field. </td></tr>
    <tr><td class="paramname">length</td><td>Length of the transfer </td></tr>
    <tr><td class="paramname">transferType</td><td>The type of transfer which has to be initiated. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<hr size="1"><small>
Copyright  2020, Texas Instruments Incorporated</small>
</body>
</html>
