<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>pmhal_bgap.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<table width=100%>
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border=0 src="../../tilogo.gif"></a></td>
  <td bgcolor="red"><img src="../../titagline.gif"></td>
</tr>
</table>
<!-- Generated by Doxygen 1.8.9.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_24c84a99586fed3db8b2257cf02e9a6c.html">pmhal</a></li><li class="navelem"><a class="el" href="dir_3fa2f83f4593ba409444d8ad12d4153e.html">prcm</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">pmhal_bgap.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This file contains the interface definition for the Temperature HAL. The Temperature HAL supports the following features:  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stddef.h&gt;</code><br />
<code>#include &lt;ti/csl/soc.h&gt;</code><br />
<code>#include &lt;ti/csl/hw_types.h&gt;</code><br />
<code>#include &quot;<a class="el" href="pm__types_8h.html">pm_types.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="pm__utils_8h.html">pm_utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="pmhal__bgap_8h.html">pmhal_bgap.h</a>&quot;</code><br />
<code>#include &quot;hw_pmhal_bgap_data.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaea55de58be4108aa2cc7a4452170cb75"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_e_m_p_e_r_a_t_u_r_e.html#gaea55de58be4108aa2cc7a4452170cb75">PMHALBgapGetCurrTemperature</a> (<a class="el" href="group___m_i_s_c.html#ga13b1aa199904e91aaf4052f17d598467">pmhalPrcmVdId_t</a> voltId, <a class="el" href="group___t_e_m_p_e_r_a_t_u_r_e.html#gae6518098bfa81255b15a8fe40168dafd">pmhalBgapRange_t</a> *currTempRange)</td></tr>
<tr class="memdesc:gaea55de58be4108aa2cc7a4452170cb75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the Band gap Temperature Sensor value for a given voltage domain.  <a href="group___t_e_m_p_e_r_a_t_u_r_e.html#gaea55de58be4108aa2cc7a4452170cb75">More...</a><br /></td></tr>
<tr class="separator:gaea55de58be4108aa2cc7a4452170cb75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7dc4212896dcc937bfd5ab5d3b2c83a1"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_e_m_p_e_r_a_t_u_r_e.html#ga7dc4212896dcc937bfd5ab5d3b2c83a1">PMHALBgapClearState</a> (<a class="el" href="group___m_i_s_c.html#ga13b1aa199904e91aaf4052f17d598467">pmhalPrcmVdId_t</a> voltId)</td></tr>
<tr class="memdesc:ga7dc4212896dcc937bfd5ab5d3b2c83a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear the accumulator and the FIFO entries of the band gap temperature sensors.  <a href="group___t_e_m_p_e_r_a_t_u_r_e.html#ga7dc4212896dcc937bfd5ab5d3b2c83a1">More...</a><br /></td></tr>
<tr class="separator:ga7dc4212896dcc937bfd5ab5d3b2c83a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf0c1b48d06c0970bad3b206a5ba307d5"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_e_m_p_e_r_a_t_u_r_e.html#gaf0c1b48d06c0970bad3b206a5ba307d5">PMHALBgapEnableHotEvent</a> (<a class="el" href="group___m_i_s_c.html#ga13b1aa199904e91aaf4052f17d598467">pmhalPrcmVdId_t</a> voltId)</td></tr>
<tr class="memdesc:gaf0c1b48d06c0970bad3b206a5ba307d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable a Hot alert event for the threshold temperature set by the API PMHALBgapSetHotThreshold.  <a href="group___t_e_m_p_e_r_a_t_u_r_e.html#gaf0c1b48d06c0970bad3b206a5ba307d5">More...</a><br /></td></tr>
<tr class="separator:gaf0c1b48d06c0970bad3b206a5ba307d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2bb1fd3328e3f7044b04a718516a1a10"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_e_m_p_e_r_a_t_u_r_e.html#ga2bb1fd3328e3f7044b04a718516a1a10">PMHALBgapDisableHotEvent</a> (<a class="el" href="group___m_i_s_c.html#ga13b1aa199904e91aaf4052f17d598467">pmhalPrcmVdId_t</a> voltId)</td></tr>
<tr class="memdesc:ga2bb1fd3328e3f7044b04a718516a1a10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable a Hot alert event for the threshold temperature set by the API PMHALBgapSetHotThreshold.  <a href="group___t_e_m_p_e_r_a_t_u_r_e.html#ga2bb1fd3328e3f7044b04a718516a1a10">More...</a><br /></td></tr>
<tr class="separator:ga2bb1fd3328e3f7044b04a718516a1a10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabe9cd65ae02b50b4a4842b9832f86dc8"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_e_m_p_e_r_a_t_u_r_e.html#gabe9cd65ae02b50b4a4842b9832f86dc8">PMHALBgapEnableColdEvent</a> (<a class="el" href="group___m_i_s_c.html#ga13b1aa199904e91aaf4052f17d598467">pmhalPrcmVdId_t</a> voltId)</td></tr>
<tr class="memdesc:gabe9cd65ae02b50b4a4842b9832f86dc8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable a Cold alert event for the threshold temperature set by the API PMHALBgapSetColdThreshold.  <a href="group___t_e_m_p_e_r_a_t_u_r_e.html#gabe9cd65ae02b50b4a4842b9832f86dc8">More...</a><br /></td></tr>
<tr class="separator:gabe9cd65ae02b50b4a4842b9832f86dc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8c705fcc954ffc186f2cdf1e9f865ab6"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_e_m_p_e_r_a_t_u_r_e.html#ga8c705fcc954ffc186f2cdf1e9f865ab6">PMHALBgapDisableColdEvent</a> (<a class="el" href="group___m_i_s_c.html#ga13b1aa199904e91aaf4052f17d598467">pmhalPrcmVdId_t</a> voltId)</td></tr>
<tr class="memdesc:ga8c705fcc954ffc186f2cdf1e9f865ab6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable a Cold alert event for the threshold temperature set by the API PMHALBgapSetColdThreshold.  <a href="group___t_e_m_p_e_r_a_t_u_r_e.html#ga8c705fcc954ffc186f2cdf1e9f865ab6">More...</a><br /></td></tr>
<tr class="separator:ga8c705fcc954ffc186f2cdf1e9f865ab6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga78064ce17403eac1a21f56d15a351bcb"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_e_m_p_e_r_a_t_u_r_e.html#ga78064ce17403eac1a21f56d15a351bcb">PMHALBgapSetMeasureDelay</a> (<a class="el" href="group___t_e_m_p_e_r_a_t_u_r_e.html#ga5324e9c0c57f3e5b04d1a026bccea505">pmhalBgapBandgapCntDelay_t</a> delay)</td></tr>
<tr class="memdesc:ga78064ce17403eac1a21f56d15a351bcb"><td class="mdescLeft">&#160;</td><td class="mdescRight">The start of temperature measurement is initiated automatically by each FSM after it goes out of reset state. To control the main delay between two measurements the CTRL_CORE_BANDGAP_MASK_1[29:27] COUNTER_DELAY bit field is used. This API sets this field.  <a href="group___t_e_m_p_e_r_a_t_u_r_e.html#ga78064ce17403eac1a21f56d15a351bcb">More...</a><br /></td></tr>
<tr class="separator:ga78064ce17403eac1a21f56d15a351bcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga932fc6f7cf6844e736d22abbef0872ac"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_e_m_p_e_r_a_t_u_r_e.html#ga932fc6f7cf6844e736d22abbef0872ac">PMHALBgapSetSIldeMode</a> (<a class="el" href="group___t_e_m_p_e_r_a_t_u_r_e.html#gaf6aa72909c0201bfec7528cdcf14a0de">pmhalBgapBandgapSIdleMode_t</a> mode)</td></tr>
<tr class="memdesc:ga932fc6f7cf6844e736d22abbef0872ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">The Temperature Sensors FSMs comply with the PRCM slave idle protocol. They share common functional clock (L3INSTR_TS_GCLK), which is automatically gated by PRCM depending on the value of the CTRL_CORE_BANDGAP_MASK_1[31:30] SIDLEMODE bit field. This field is set by this API.  <a href="group___t_e_m_p_e_r_a_t_u_r_e.html#ga932fc6f7cf6844e736d22abbef0872ac">More...</a><br /></td></tr>
<tr class="separator:ga932fc6f7cf6844e736d22abbef0872ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadabacd5b54c117985daa4185fb93b40b"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_e_m_p_e_r_a_t_u_r_e.html#gadabacd5b54c117985daa4185fb93b40b">PMHALBgapSetHotThreshold</a> (<a class="el" href="group___m_i_s_c.html#ga13b1aa199904e91aaf4052f17d598467">pmhalPrcmVdId_t</a> voltId, int32_t tempInMilliDegree)</td></tr>
<tr class="memdesc:gadabacd5b54c117985daa4185fb93b40b"><td class="mdescLeft">&#160;</td><td class="mdescRight">This API configures the high temperature threshold for generating thermal alerts through programming the CTRL_CORE_BANDGAP_THRESHOLD_x[25:16] THOLD_HOT_x bit fields.  <a href="group___t_e_m_p_e_r_a_t_u_r_e.html#gadabacd5b54c117985daa4185fb93b40b">More...</a><br /></td></tr>
<tr class="separator:gadabacd5b54c117985daa4185fb93b40b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga98a8b2fbbe397127b7f5a0a27b21e864"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_e_m_p_e_r_a_t_u_r_e.html#ga98a8b2fbbe397127b7f5a0a27b21e864">PMHALBgapSetColdThreshold</a> (<a class="el" href="group___m_i_s_c.html#ga13b1aa199904e91aaf4052f17d598467">pmhalPrcmVdId_t</a> voltId, int32_t tempInMilliDegree)</td></tr>
<tr class="memdesc:ga98a8b2fbbe397127b7f5a0a27b21e864"><td class="mdescLeft">&#160;</td><td class="mdescRight">This API configures the Low temperature threshold for generating thermal alerts through programming the CTRL_CORE_BANDGAP_THRESHOLD_x[25:16] THOLD_COLD_x bit fields.  <a href="group___t_e_m_p_e_r_a_t_u_r_e.html#ga98a8b2fbbe397127b7f5a0a27b21e864">More...</a><br /></td></tr>
<tr class="separator:ga98a8b2fbbe397127b7f5a0a27b21e864"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga59b239aeba842db476998a6a48b44c30"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_e_m_p_e_r_a_t_u_r_e.html#ga59b239aeba842db476998a6a48b44c30">PMHALBgapGetHotThreshold</a> (<a class="el" href="group___m_i_s_c.html#ga13b1aa199904e91aaf4052f17d598467">pmhalPrcmVdId_t</a> voltId, <a class="el" href="group___t_e_m_p_e_r_a_t_u_r_e.html#gae6518098bfa81255b15a8fe40168dafd">pmhalBgapRange_t</a> *thresholdTempRange)</td></tr>
<tr class="memdesc:ga59b239aeba842db476998a6a48b44c30"><td class="mdescLeft">&#160;</td><td class="mdescRight">This API returns the configured high temperature threshold range programmed into the CTRL_CORE_BANDGAP_THRESHOLD_x[25:16] THOLD_HOT_x bit fields.  <a href="group___t_e_m_p_e_r_a_t_u_r_e.html#ga59b239aeba842db476998a6a48b44c30">More...</a><br /></td></tr>
<tr class="separator:ga59b239aeba842db476998a6a48b44c30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1c39efb43c585749884c5623387d17f3"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_e_m_p_e_r_a_t_u_r_e.html#ga1c39efb43c585749884c5623387d17f3">PMHALBgapGetColdThreshold</a> (<a class="el" href="group___m_i_s_c.html#ga13b1aa199904e91aaf4052f17d598467">pmhalPrcmVdId_t</a> voltId, <a class="el" href="group___t_e_m_p_e_r_a_t_u_r_e.html#gae6518098bfa81255b15a8fe40168dafd">pmhalBgapRange_t</a> *thresholdTempRange)</td></tr>
<tr class="memdesc:ga1c39efb43c585749884c5623387d17f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">This API returns the configured low temperature threshold range programmed into the CTRL_CORE_BANDGAP_THRESHOLD_x[25:16] THOLD_COLD_x bit fields.  <a href="group___t_e_m_p_e_r_a_t_u_r_e.html#ga1c39efb43c585749884c5623387d17f3">More...</a><br /></td></tr>
<tr class="separator:ga1c39efb43c585749884c5623387d17f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7177b00e8082cbf21d9306b8bd20b6cf"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_e_m_p_e_r_a_t_u_r_e.html#ga7177b00e8082cbf21d9306b8bd20b6cf">PMHALBgapGetHotAlertStatus</a> (<a class="el" href="group___m_i_s_c.html#ga13b1aa199904e91aaf4052f17d598467">pmhalPrcmVdId_t</a> voltId, uint32_t *hotStatus)</td></tr>
<tr class="memdesc:ga7177b00e8082cbf21d9306b8bd20b6cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">The non masked (raw) comparator outputs are available for reading through the corresponding bits in the CTRL_CORE_BANDGAP_STATUS_1 and CTRL_CORE_BANDGAP_STATUS_2 registers. The high temperature threshold comparator outputs are read through the HOT_x bits using this API.  <a href="group___t_e_m_p_e_r_a_t_u_r_e.html#ga7177b00e8082cbf21d9306b8bd20b6cf">More...</a><br /></td></tr>
<tr class="separator:ga7177b00e8082cbf21d9306b8bd20b6cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga954fa4f56710232125fa5212764bc743"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_e_m_p_e_r_a_t_u_r_e.html#ga954fa4f56710232125fa5212764bc743">PMHALBgapGetColdAlertStatus</a> (<a class="el" href="group___m_i_s_c.html#ga13b1aa199904e91aaf4052f17d598467">pmhalPrcmVdId_t</a> voltId, uint32_t *coldStatus)</td></tr>
<tr class="memdesc:ga954fa4f56710232125fa5212764bc743"><td class="mdescLeft">&#160;</td><td class="mdescRight">The non masked (raw) comparator outputs are available for reading through the corresponding bits in the CTRL_CORE_BANDGAP_STATUS_1 and CTRL_CORE_BANDGAP_STATUS_2 registers. The low temperature threshold comparator outputs are read through the COLD_x bits using this API.  <a href="group___t_e_m_p_e_r_a_t_u_r_e.html#ga954fa4f56710232125fa5212764bc743">More...</a><br /></td></tr>
<tr class="separator:ga954fa4f56710232125fa5212764bc743"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0df6b35b7d55ef4c0ad4a29a301df3ed"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_e_m_p_e_r_a_t_u_r_e.html#ga0df6b35b7d55ef4c0ad4a29a301df3ed">PMHALBgapWaitForAlertClear</a> (uint32_t timeOut)</td></tr>
<tr class="memdesc:ga0df6b35b7d55ef4c0ad4a29a301df3ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">The CTRL_MODULE_CORE_IRQ_THERMAL_ALERT signal is also routed to the CTRL_CORE_BANDGAP_STATUS_1[31] ALERT bit. Value of 0x1 indicates that the CTRL_MODULE_CORE_IRQ_THERMAL_ALERT signal is asserted. Software can use this interrupt to implement the device thermal management policy. This API can be used to wait for the clearing of the alert signal as the temperature of the voltage domains drop below their threshold.  <a href="group___t_e_m_p_e_r_a_t_u_r_e.html#ga0df6b35b7d55ef4c0ad4a29a301df3ed">More...</a><br /></td></tr>
<tr class="separator:ga0df6b35b7d55ef4c0ad4a29a301df3ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3091af8301b9bb88988f1d6ae29d8f1a"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_e_m_p_e_r_a_t_u_r_e.html#ga3091af8301b9bb88988f1d6ae29d8f1a">PMHALBgapGetFifoEntry</a> (<a class="el" href="group___m_i_s_c.html#ga13b1aa199904e91aaf4052f17d598467">pmhalPrcmVdId_t</a> voltId, uint32_t entryNum, <a class="el" href="group___t_e_m_p_e_r_a_t_u_r_e.html#ga038837b8add4e9e48cf7f9cbc12bd45d">pmhalBgapFifoEntry_t</a> *fifoEntry)</td></tr>
<tr class="memdesc:ga3091af8301b9bb88988f1d6ae29d8f1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Each time one of the CTRL_CORE_TEMP_SENSOR_x[9:0] BGAP_DTEMP_x bit fields is updated with new temperature value, this value is also automatically stored into a 5-level deep FIFO and a time stamp is registered too. This API helps read the value for a given entry number.  <a href="group___t_e_m_p_e_r_a_t_u_r_e.html#ga3091af8301b9bb88988f1d6ae29d8f1a">More...</a><br /></td></tr>
<tr class="separator:ga3091af8301b9bb88988f1d6ae29d8f1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file contains the interface definition for the Temperature HAL. The Temperature HAL supports the following features: </p>
<ul>
<li>To return the temperature of a given voltage domain.</li>
<li>To return the average voltage of a given voltage domain since the last clear accumulator.</li>
<li>To clear the fifo &amp; accumulator of the band gap temperature sensors</li>
<li>To freeze the update of the band gap FIFOs of the desired voltage domain.</li>
<li>To mask/unmask the hot event for the given voltage rail.</li>
<li>To set the desired delay between two temperature measurements.</li>
<li>To set the desired sidle mode for the band gap sensors.</li>
<li>To set the band gap threshold hot and cold value for the alert operation.</li>
<li>To check if a given voltage domain has the hot/cold alert set.</li>
<li>To read the fifo entries for a given voltage domain. Return the fifo entry one is looking for. </li>
</ul>
</div></div><!-- contents -->
<hr size="1"><small>
Copyright  2020, Texas Instruments Incorporated</small>
</body>
</html>
