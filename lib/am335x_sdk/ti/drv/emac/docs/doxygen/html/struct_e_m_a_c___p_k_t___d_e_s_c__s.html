<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>EMAC_PKT_DESC_s Struct Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<table width=100%>
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border=0 src="./tilogo.gif"></a></td>
  <td bgcolor="red"><img src="./titagline.gif"></td>
</tr>
</table>
<!-- Generated by Doxygen 1.8.9.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<div class="title">EMAC_PKT_DESC_s Struct Reference<div class="ingroups"><a class="el" href="group__emaclld__module.html">EMAC LLD Module API</a> &raquo; <a class="el" href="group__emaclld__api__structures.html">EMAC LLD Data Structures</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Emac packet descriptor specification.  
 <a href="struct_e_m_a_c___p_k_t___d_e_s_c__s.html#details">More...</a></p>

<p><code>#include &lt;emac_drv.h&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a770bf441a10b82875aebd8156a1526fd"><td class="memItemLeft" align="right" valign="top">uintptr_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_e_m_a_c___p_k_t___d_e_s_c__s.html#a770bf441a10b82875aebd8156a1526fd">AppPrivate</a></td></tr>
<tr class="separator:a770bf441a10b82875aebd8156a1526fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7b3e8bef0853108ee7052c1312f202e"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="struct_e_m_a_c___p_k_t___d_e_s_c__s.html">EMAC_PKT_DESC_s</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_e_m_a_c___p_k_t___d_e_s_c__s.html#aa7b3e8bef0853108ee7052c1312f202e">pPrev</a></td></tr>
<tr class="separator:aa7b3e8bef0853108ee7052c1312f202e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57df1f3154636622d900ac740c3c608e"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="struct_e_m_a_c___p_k_t___d_e_s_c__s.html">EMAC_PKT_DESC_s</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_e_m_a_c___p_k_t___d_e_s_c__s.html#a57df1f3154636622d900ac740c3c608e">pNext</a></td></tr>
<tr class="separator:a57df1f3154636622d900ac740c3c608e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e031790ea5169e66343be48dd37bb37"><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_e_m_a_c___p_k_t___d_e_s_c__s.html#a7e031790ea5169e66343be48dd37bb37">pDataBuffer</a></td></tr>
<tr class="separator:a7e031790ea5169e66343be48dd37bb37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae97f39e0cbbfb1d74db6dde299b039f5"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_e_m_a_c___p_k_t___d_e_s_c__s.html#ae97f39e0cbbfb1d74db6dde299b039f5">BufferLen</a></td></tr>
<tr class="separator:ae97f39e0cbbfb1d74db6dde299b039f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef7ca6c489f0b0882f3a45502eafda01"><td class="memItemLeft" align="right" valign="top"><a class="el" href="emac__drv_8h.html#aa32ace775c94f534ed133149b6f47a8e">EMAC_PKT_FLAG_T</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_e_m_a_c___p_k_t___d_e_s_c__s.html#aef7ca6c489f0b0882f3a45502eafda01">Flags</a></td></tr>
<tr class="separator:aef7ca6c489f0b0882f3a45502eafda01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a539af71c713330a6fe87674f32636c11"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_e_m_a_c___p_k_t___d_e_s_c__s.html#a539af71c713330a6fe87674f32636c11">ValidLen</a></td></tr>
<tr class="separator:a539af71c713330a6fe87674f32636c11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b01d0d78d4d102580a89ab1638fb142"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_e_m_a_c___p_k_t___d_e_s_c__s.html#a4b01d0d78d4d102580a89ab1638fb142">DataOffset</a></td></tr>
<tr class="separator:a4b01d0d78d4d102580a89ab1638fb142"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa07df6743b8cea2976dc6fee56048c31"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_e_m_a_c___p_k_t___d_e_s_c__s.html#aa07df6743b8cea2976dc6fee56048c31">PktChannel</a></td></tr>
<tr class="separator:aa07df6743b8cea2976dc6fee56048c31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae82e573a4cc00c300027f79ac5239ebe"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_e_m_a_c___p_k_t___d_e_s_c__s.html#ae82e573a4cc00c300027f79ac5239ebe">PktLength</a></td></tr>
<tr class="separator:ae82e573a4cc00c300027f79ac5239ebe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6efc1b5beadd58f7e7fdcf0d24f612b3"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_e_m_a_c___p_k_t___d_e_s_c__s.html#a6efc1b5beadd58f7e7fdcf0d24f612b3">PktFrags</a></td></tr>
<tr class="separator:a6efc1b5beadd58f7e7fdcf0d24f612b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25baefc6c2cfca941a909d3a77b27556"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_e_m_a_c___p_k_t___d_e_s_c__s.html#a25baefc6c2cfca941a909d3a77b27556">RxTimeStamp</a></td></tr>
<tr class="separator:a25baefc6c2cfca941a909d3a77b27556"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9621eb99ea56b0bc24d918a3bdcf834b"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_e_m_a_c___p_k_t___d_e_s_c__s.html#a9621eb99ea56b0bc24d918a3bdcf834b">TxtimestampId</a></td></tr>
<tr class="separator:a9621eb99ea56b0bc24d918a3bdcf834b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26d73a767c35e6c2dabb5563ba0c7ce0"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_e_m_a_c___p_k_t___d_e_s_c__s.html#a26d73a767c35e6c2dabb5563ba0c7ce0">TxPktTc</a></td></tr>
<tr class="separator:a26d73a767c35e6c2dabb5563ba0c7ce0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc0c54abb904b0879cfa6bf94fea129b"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_e_m_a_c___p_k_t___d_e_s_c__s.html#afc0c54abb904b0879cfa6bf94fea129b">RefCount</a></td></tr>
<tr class="separator:afc0c54abb904b0879cfa6bf94fea129b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Emac packet descriptor specification. </p>
<p>The packet structure defines the basic unit of memory used to hold data packets for the EMAC device.</p>
<p>A packet is comprised of one or more packet buffers. Each packet buffer contains a packet buffer header, and a pointer to the buffer data. The EMAC_Pkt structure defines the packet buffer header.</p>
<p>The pDataBuffer field points to the packet data. This is set when the buffer is allocated, and is not altered.</p>
<p>BufferLen holds the the total length of the data buffer that is used to store the packet (or packet fragment). This size is set by the entity that originally allocates the buffer, and is not altered.</p>
<p>The Flags field contains additional information about the packet</p>
<p>ValidLen holds the length of the valid data currently contained in the data buffer.</p>
<p>DataOffset is the byte offset from the start of the data buffer to the first byte of valid data. Thus (ValidLen+DataOffet)&lt;=BufferLen.</p>
<p>Note that for receive buffer packets, the DataOffset field may be assigned before there is any valid data in the packet buffer. This allows the application to reserve space at the top of data buffer for private use. In all instances, the DataOffset field must be valid for all packets handled by EMAC.</p>
<p>The data portion of the packet buffer represents a packet or a fragment of a larger packet. This is determined by the Flags parameter. At the start of every packet, the SOP bit is set in Flags. If the EOP bit is also set, then the packet is not fragmented. Otherwise; the next packet structure pointed to by the pNext field will contain the next fragment in the packet. On either type of buffer, when the SOP bit is set in Flags, then the PktChannel, PktLength, and PktFrags fields must also be valid. These fields contain additional information about the packet.</p>
<p>The PktChannel field detetmines what channel the packet has arrived on, or what channel it should be transmitted on. The EMAC library supports only a single receive channel, but allows for up to eight transmit channels. Transmit channels can be treated as round-robin or priority queues.</p>
<p>The PktLength field holds the size of the entire packet. On single frag packets (both SOP and EOP set in BufFlags), PktLength and ValidLen will be equal.</p>
<p>The PktFrags field holds the number of fragments (EMAC_Pkt records) used to describe the packet. If more than 1 frag is present, the first record must have EMAC_PKT_FLAGS_SOP flag set, with corresponding fields validated. Each frag/record must be linked list using the pNext field, and the final frag/record must have EMAC_PKT_FLAGS_EOP flag set and pNext=0.</p>
<p>In systems where the packet resides in cacheable memory, the data buffer must start on a cache line boundary and be an even multiple of cache lines in size. The EMAC_Pkt header must not appear in the same cache line as the data portion of the packet. On multi-fragment packets, some packet fragments may reside in cacheable memory where others do not.</p>
<pre class="fragment"> &lt;b&gt; NOTE: It is up to the caller to assure that all packet buffers
 residing in cacheable memory are not currently stored in L1 or L2
 cache when passed to any EMAC function. &lt;/b&gt;</pre><p>Some of the packet Flags can only be set if the device is in the proper configuration to receive the corresponding frames. In order to enable these flags, the following modes must be set: RxCrc Flag : RXCRC Mode in EMAC_Cpsw3gInitConfig RxErr Flags : PASSERROR Mode in EMAC_Cpsw3gInitConfig RxCtl Flags : PASSCONTROL Mode in EMAC_Cpsw3gInitConfig RxPrm Flag : EMAC_RXFILTER_ALL in CPSW_setReceiveFilter() </p>
</div><h2 class="groupheader">Field Documentation</h2>
<a class="anchor" id="a770bf441a10b82875aebd8156a1526fd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uintptr_t EMAC_PKT_DESC_s::AppPrivate</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>For use by the application </p>

</div>
</div>
<a class="anchor" id="ae97f39e0cbbfb1d74db6dde299b039f5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t EMAC_PKT_DESC_s::BufferLen</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Physical Length of buffer (read only) </p>

</div>
</div>
<a class="anchor" id="a4b01d0d78d4d102580a89ab1638fb142"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t EMAC_PKT_DESC_s::DataOffset</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Byte offset to valid data </p>

</div>
</div>
<a class="anchor" id="aef7ca6c489f0b0882f3a45502eafda01"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="emac__drv_8h.html#aa32ace775c94f534ed133149b6f47a8e">EMAC_PKT_FLAG_T</a> EMAC_PKT_DESC_s::Flags</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Packet Flags, SOP, EOP, TX timestamp request </p>

</div>
</div>
<a class="anchor" id="a7e031790ea5169e66343be48dd37bb37"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t* EMAC_PKT_DESC_s::pDataBuffer</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Pointer to Data Buffer (read only) </p>

</div>
</div>
<a class="anchor" id="aa07df6743b8cea2976dc6fee56048c31"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t EMAC_PKT_DESC_s::PktChannel</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Tx/Rx Channel 0-7 (SOP only) </p>

</div>
</div>
<a class="anchor" id="a6efc1b5beadd58f7e7fdcf0d24f612b3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t EMAC_PKT_DESC_s::PktFrags</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>No of frags in packet (SOP only), normally 1 </p>

</div>
</div>
<a class="anchor" id="ae82e573a4cc00c300027f79ac5239ebe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t EMAC_PKT_DESC_s::PktLength</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Length of Packet (SOP only) (same as ValidLen on single frag Pkt) </p>

</div>
</div>
<a class="anchor" id="a57df1f3154636622d900ac740c3c608e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="struct_e_m_a_c___p_k_t___d_e_s_c__s.html">EMAC_PKT_DESC_s</a>* EMAC_PKT_DESC_s::pNext</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Next descriptor pointer </p>

</div>
</div>
<a class="anchor" id="aa7b3e8bef0853108ee7052c1312f202e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="struct_e_m_a_c___p_k_t___d_e_s_c__s.html">EMAC_PKT_DESC_s</a>* EMAC_PKT_DESC_s::pPrev</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Previous descriptor pointer </p>

</div>
</div>
<a class="anchor" id="afc0c54abb904b0879cfa6bf94fea129b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t EMAC_PKT_DESC_s::RefCount</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>reference count used for PG1.0/Interposercard TSN SWITCH un-directed packets use case, LLD internal use only </p>

</div>
</div>
<a class="anchor" id="a25baefc6c2cfca941a909d3a77b27556"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t EMAC_PKT_DESC_s::RxTimeStamp</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Receive packet timestamp </p>

</div>
</div>
<a class="anchor" id="a26d73a767c35e6c2dabb5563ba0c7ce0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t EMAC_PKT_DESC_s::TxPktTc</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>TX packet traffic class indicates which TX port queue the ICSSG FW should use the transmit the packet to the PHY </p>

</div>
</div>
<a class="anchor" id="a9621eb99ea56b0bc24d918a3bdcf834b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t EMAC_PKT_DESC_s::TxtimestampId</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Transmit timestamp id used to correleate request with response </p>

</div>
</div>
<a class="anchor" id="a539af71c713330a6fe87674f32636c11"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t EMAC_PKT_DESC_s::ValidLen</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Length of valid data in buffer </p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li><a class="el" href="emac__drv_8h.html">emac_drv.h</a></li>
</ul>
</div><!-- contents -->
<hr size="1"><small>
Copyright  2020, Texas Instruments Incorporated</small>
</body>
</html>
